async function e(){const e=await fetch("https://mp1-test-caf8c-default-rtdb.europe-west1.firebasedatabase.app/.json"),t=await e.json();return Object.values(t)}function t(e){const t=document.querySelector(".playerCard");t.innerHTML="",e.forEach((e=>{const s=document.createElement("div");s.classList.add("card"),t.append(s);const a=document.createElement("h2");a.innerText=`Player: ${e.a.name}`,s.append(a);const r=document.createElement("p");r.innerText=`Score: ${e.b.score}`,s.append(r)}))}async function s(t,s){const a=await e(),r=a.findIndex((e=>e.a.name===t));if(-1!==r)s>a[r].b.score&&(a[r].b.score=s);else{const e={a:{name:t},b:{score:s}};a.push(e)}a.sort(((e,t)=>t.b.score-e.b.score)),a.length=Math.min(a.length,5);const o={method:"PUT",body:JSON.stringify(a),headers:{"Content-type":"application/json; charset=UTF-8"}},c=await fetch("https://mp1-test-caf8c-default-rtdb.europe-west1.firebasedatabase.app/.json",o);return await c.json()}e().then(t);new class{constructor(){this.playerNameValue="",this.playerName=document.querySelector("#playerName"),this.displayName=document.querySelector("#displayName"),this.displayPlayerChoice=document.querySelector("#displayPlayerChoice"),this.displayComputerChoice=document.querySelector("#displayComputerChoice"),this.displayPlayerScore=document.querySelector("#displayPlayerScore"),this.displayComputerScore=document.querySelector("#displayComputerScore"),this.displayResult=document.querySelector("#displayResult"),this.displayGameResult=document.querySelector("#displayGameResult"),this.startGame=document.querySelector("#startGame"),this.buttons=[...document.querySelectorAll(".choiceButtons")],this.playerScore=0,this.computerScore=0,this.startGame.addEventListener("click",this.welcomePlayer.bind(this)),this.buttons.forEach((e=>{e.addEventListener("click",(()=>this.play(e.id)))}))}async welcomePlayer(e){e.preventDefault(),this.playerNameValue=this.playerName.value,this.displayName.textContent=`Welcome, ${this.playerNameValue}!`,this.playerName.value="",this.playerScore=0}async play(a){this.displayPlayerChoice.textContent=`Player choice: ${a}`;const r=this.getComputerChoice();this.displayComputerChoice.textContent=`Computer choice : ${r}`;const o=this.getResult(a,r);"win"===o?this.playerScore++:"lose"===o&&(this.playerScore=0),this.displayPlayerScore.textContent=`Player score : ${this.playerScore}`,this.displayComputerScore.textContent=`Computer score : ${this.computerScore}`,this.displayResult.textContent=`Result: ${o}`,"win"===o?this.displayGameResult.textContent=`${this.playerNameValue} wins!`:"lose"===o&&(this.displayGameResult.textContent="Computer wins!");const c=this.playerNameValue,i=this.playerScore;await s(c,i);t(await e())}getComputerChoice(){const e=["rock","paper","scissors"];return e[Math.floor(Math.random()*e.length)]}getResult(e,t){return e===t?"draw":"rock"===e&&"scissors"===t||"paper"===e&&"rock"===t||"scissors"===e&&"paper"===t?"win":"lose"}};
//# sourceMappingURL=index.670afb65.js.map
